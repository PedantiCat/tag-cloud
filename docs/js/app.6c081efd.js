(function(t){function e(e){for(var a,i,o=e[0],u=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},s=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0b26":function(t,e,r){},2959:function(t,e,r){},"2adf":function(t,e,r){"use strict";var a=r("3f8d"),n=r.n(a);n.a},"363e":function(t,e,r){},"3f8d":function(t,e,r){},"40c8":function(t,e,r){"use strict";var a=r("e82b"),n=r.n(a);n.a},"4a6a":function(t,e,r){"use strict";var a=r("5b00"),n=r.n(a);n.a},5336:function(t,e,r){"use strict";var a=r("363e"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",{attrs:{id:"page-title"}},[t._v("Tag Cloud Generator!")]),r("control-panel",{attrs:{username:t.username,period:t.period,max_artists:t.max_artists,state:t.generator.state},on:{"update:username":function(e){t.username=e},"update:period":function(e){t.period.selected=e},"update:max_artists":function(e){t.max_artists.selected=e},generate:t.generate}}),r("div",{attrs:{id:"results-container"}},[r("results",{ref:"results",attrs:{state:t.generator.state,result:t.generator.result}})],1)],1)},s=[],i=(r("96cf"),r("1da1")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"container"}},[r("div",{attrs:{id:"username-entry"}},[r("span",[t._v("Last.fm Username:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],domProps:{value:t.username},on:{change:function(e){return t.$emit("update:username",e.target.value)},input:function(e){e.target.composing||(t.username=e.target.value)}}})]),r("control-panel-option",{attrs:{name:"Period",options:t.period.options,selected:t.period.selected},on:{update:function(e){return t.$emit("update:period",e)}}}),r("control-panel-option",{attrs:{name:"Max Artists",options:t.max_artists.options,selected:t.max_artists.selected},on:{update:function(e){return t.$emit("update:max_artists",e)}}}),r("div",{staticClass:"option",attrs:{id:"button-container"}},[r("button",{attrs:{id:"generate-button",loading:void 0!=t.state?"true":"false"},on:{click:function(e){return t.$emit("generate")}}},[t._v("Load Data")])])],1)},u=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("span",[t._v(t._s(t.name)+": ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?r:r[0]},function(e){return t.$emit("update",e.target.value)}]}},t._l(t.options,(function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),0)])},c=[],p={props:["name","options","selected"]},d=p,h=(r("5336"),r("2877")),f=Object(h["a"])(d,l,c,!1,null,"56f601c9",null),v=f.exports,g={components:{ControlPanelOption:v},props:["username","period","max_artists","state"]},m=g,_=(r("2adf"),Object(h["a"])(m,o,u,!1,null,"b5c49ab2",null)),b=_.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[void 0!=t.result&&void 0==t.state?r("h2",[t._v(" "+t._s(t.result.username+("s"==t.result.username[t.result.username.length-1].toLowerCase()?"'":"'s"))+" tag cloud based upon their top "+t._s(t.result.artists.length)+" artists "+t._s({"7day":"over the last 7 days","1month":"over the last month","3month":"over the last 3 months","6month":"over the last 6 months","12month":"over the last year",overall:"overall"}[t.result.period])+": ")]):void 0!=t.state?r("h2",[r("spinner"),t._v(" "+t._s(t.state)+" ")],1):r("h2",[t._v(' Click "Load Data"! ')]),r("canvas",{directives:[{name:"show",rawName:"v-show",value:t.generatingCloud,expression:"generatingCloud"}],ref:"tag-cloud-canvas",attrs:{id:"tag-cloud-canvas",width:"1920",height:"1200"}}),void 0!=t.result?r("artists-list",{attrs:{id:"artists-list",artists:t.result.artists,listens:t.result.listens}}):t._e(),void 0!=t.result?r("tags-list",{attrs:{id:"tags-list",tags:t.result.tags,taggings:t.result.taggings}}):t._e()],1)},x=[],w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("collapse-button",{attrs:{collapsed:t.collapsed},on:{collapse:t.collapse}}),r("h2",[t._v("Artists:")]),t.collapsed?t._e():r("div",[r("ol",{attrs:{id:"artist-list"}},t._l(t.artists,(function(e){return r("li",{key:e,attrs:{artist:e}},[r("span",{staticClass:"artist"},[t._v(t._s(e))]),t._v(" ("+t._s(t.listens[e])+" "),t.listens[e]>1?r("span",[t._v("listens")]):r("span",[t._v("listen")]),t._v(") ")])})),0)])],1)},k=[],O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"collapse-button",on:{click:function(e){return t.$emit("collapse")}}},[t._v(t._s(t.collapsed?"+":"-"))])},j=[],C={props:["collapsed"]},P=C,R=(r("905f"),Object(h["a"])(P,O,j,!1,null,"5d170b00",null)),$=R.exports,S={components:{CollapseButton:$},props:["artists","listens"],data:function(){return{collapsed:!0}},methods:{collapse:function(){this.collapsed=!this.collapsed}}},T=S,M=(r("a758"),Object(h["a"])(T,w,k,!1,null,"6bf6ba28",null)),E=M.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("collapse-button",{attrs:{collapsed:t.collapsed},on:{collapse:t.collapse}}),r("h2",[t._v("Tags:")]),t.collapsed?t._e():r("div",[r("ol",{staticClass:"tag-list"},t._l(t.tags,(function(e){return r("li",{key:e,attrs:{tag:e}},[r("span",{staticClass:"tag"},[t._v(t._s(e))]),t._v(": "),r("ol",{staticClass:"artist-list"},t._l(t.taggings[e],(function(e){return r("li",{key:e.artist},[t._v(t._s(e.artist))])})),0)])})),0)])],1)},A=[],D={components:{CollapseButton:$},props:["tags","taggings"],data:function(){return{collapsed:!0}},methods:{collapse:function(){this.collapsed=!this.collapsed}}},G=D,N=(r("da2c"),Object(h["a"])(G,L,A,!1,null,"55b52903",null)),B=N.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"spinner"}})},J=[],U=(r("40c8"),{}),Y=Object(h["a"])(U,F,J,!1,null,"36a63750",null),q=Y.exports,z={components:{ArtistsList:E,TagsList:B,Spinner:q},props:["state","result"],data:function(){return{generatingCloud:!1}},methods:{createTagCloud:function(t){this.generatingCloud=!0,t.generate_tag_cloud(this.$refs["tag-cloud-canvas"])}}},H=z,I=(r("4a6a"),Object(h["a"])(H,y,x,!1,null,"3379c807",null)),K=I.exports,Q=(r("a4d3"),r("e01a"),r("d28b"),r("fb6a"),r("b0c0"),r("6b93"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("ddb0"),r("d4ec")),V=r("bee2"),W=r("bc3a"),X=r.n(W),Z=r("175f"),tt=r.n(Z),et="97773975bd1d3fdf89b362a27d2b6313",rt=function(){function t(){Object(Q["a"])(this,t),this.result=void 0,this.state=void 0}return Object(V["a"])(t,[{key:"generate",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.result={username:e,period:r,max_artists:a,artists:[],listens:{},tags:[],taggings:{},tag_meta:{},scores:{}},this.state="Getting artists' data...",t.next=4,this.get_artist_data();case 4:return this.state="Pruning tags...",t.next=7,this.prune_tags();case 7:return this.state="Getting tags' data...",t.next=10,this.get_tag_data();case 10:return this.state="Scoring tags...",t.next=13,this.score_tags();case 13:return this.state="Sorting tags...",t.next=16,this.sort_data();case 16:this.state=void 0;case 17:case"end":return t.stop()}}),t,this)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{key:"get_artist_data",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X.a.get("http://ws.audioscrobbler.com/2.0/?method=user.gettopartists&api_key="+et+"&user="+this.result.username+"&period="+this.result.period+"&limit="+this.result.max_artists+"&format=json").then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,a,n,s,o,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=[],a=!0,n=!1,s=void 0,t.prev=4,o=e.data.topartists.artist[Symbol.iterator]();!(a=(u=o.next()).done);a=!0)l=u.value,r.push(new Promise(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=l.name.toLowerCase(),this.result.artists.push(r),this.result.listens[r]=l.playcount,t.next=5,X.a.get("http://ws.audioscrobbler.com/2.0/?method=artist.getTopTags&api_key="+et+"&artist="+r.replace("&","%26")+"&format=json").then(function(t){if(void 0!=t.data.toptags){var e=!0,a=!1,n=void 0;try{for(var s,i=t.data.toptags.tag[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var o=s.value;o.name=o.name.toLowerCase(),void 0==this.result.taggings[o.name]?(this.result.tags.push(o.name),this.result.taggings[o.name]=[{artist:r,count:o.count}],this.result.tag_meta[o.name]={library_total:o.count/100}):(this.result.taggings[o.name].push({artist:r,count:o.count}),this.result.tag_meta[o.name].library_total+=o.count/100)}}catch(u){a=!0,n=u}finally{try{e||null==i.return||i.return()}finally{if(a)throw n}}}}.bind(this));case 5:e(!0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}().bind(this)));t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](4),n=!0,s=t.t0;case 12:t.prev=12,t.prev=13,a||null==o.return||o.return();case 15:if(t.prev=15,!n){t.next=18;break}throw s;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return t.next=22,Promise.all(r);case 22:case"end":return t.stop()}}),t,this,[[4,8,12,20],[13,,15,19]])})));return function(e){return t.apply(this,arguments)}}().bind(this));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"prune_tags",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.result.tags.sort(function(t,e){return this.result.tag_meta[e].library_total-this.result.tag_meta[t].library_total}.bind(this)),this.result.tags=this.result.tags.slice(0,100);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_tag_data",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n,s,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=[],r=!0,a=!1,n=void 0,t.prev=4,s=this.result.tags[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u=o.value,e.push(new Promise(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X.a.get("http://ws.audioscrobbler.com/2.0/?method=tag.getinfo&api_key="+et+"&tag="+u+"&format=json").then(function(t){void 0!=t.data.tag&&(this.result.tag_meta[t.data.tag.name].reach=t.data.tag.reach,this.result.tag_meta[t.data.tag.name].total=t.data.tag.total)}.bind(this));case 2:e(!0);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}().bind(this)));t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](4),a=!0,n=t.t0;case 12:t.prev=12,t.prev=13,r||null==s.return||s.return();case 15:if(t.prev=15,!a){t.next=18;break}throw n;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return t.next=22,Promise.all(e);case 22:case"end":return t.stop()}}),t,this,[[4,8,12,20],[13,,15,19]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"score_tags",value:function(){var t=!0,e=!1,r=void 0;try{for(var a,n=this.result.tags[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.result.scores[s]=0;var i=!0,o=!1,u=void 0;try{for(var l,c=this.result.taggings[s][Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value;this.result.scores[s]+=p.count/100*this.result.listens[p.artist]}}catch(d){o=!0,u=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}this.result.scores[s]=this.result.scores[s]*(this.result.tag_meta[s].library_total/this.result.tag_meta[s].total)*this.result.taggings[s].length*this.result.taggings[s].length*Math.log10(this.result.tag_meta[s].reach)}}catch(d){e=!0,r=d}finally{try{t||null==n.return||n.return()}finally{if(e)throw r}}}},{key:"sort_data",value:function(){var t=!0,e=!1,r=void 0;try{for(var a,n=this.result.tags[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.result.taggings[s].sort((function(t,e){return e.count-t.count}))}}catch(i){e=!0,r=i}finally{try{t||null==n.return||n.return()}finally{if(e)throw r}}this.result.tags.sort(function(t,e){return this.result.scores[e]-this.result.scores[t]}.bind(this))}},{key:"generate_tag_cloud",value:function(t){this.cloud_tags=[];var e=1/0,r=-1/0,a=!0,n=!1,s=void 0;try{for(var i,o=this.result.tags[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var u=i.value;this.result.scores[u]<e&&(e=this.result.scores[u]),this.result.scores[u]>r&&(r=this.result.scores[u])}}catch(f){n=!0,s=f}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}var l=!0,c=!1,p=void 0;try{for(var d,h=this.result.tags[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)u=d.value,this.cloud_tags.push([u,Math.log10(99*(this.result.scores[u]-e)/r+1)/2*175+25])}catch(f){c=!0,p=f}finally{try{l||null==h.return||h.return()}finally{if(c)throw p}}tt()(t,{list:this.cloud_tags,fontFamily:"Courier",color:"#000",shrinkToFit:!0})}}]),t}(),at=rt,nt={components:{Results:K,ControlPanel:b},data:function(){return{username:"TheTeaCat",period:{selected:"3month",options:[{text:"7 Days",value:"7day"},{text:"Month",value:"1month"},{text:"3 Months",value:"3month"},{text:"6 Months",value:"6month"},{text:"Year",value:"12month"},{text:"Overall",value:"overall"}]},max_artists:{selected:25,options:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100}]},generator:new at,tags:void 0}},methods:{generate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.generator.generate(this.username,this.period.selected,this.max_artists.selected);case 2:this.$refs["results"].createTagCloud(this.generator);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},st=nt,it=(r("c9e6"),Object(h["a"])(st,n,s,!1,null,"24fac182",null)),ot=it.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(ot)}}).$mount("#app")},"5b00":function(t,e,r){},7877:function(t,e,r){},"905f":function(t,e,r){"use strict";var a=r("2959"),n=r.n(a);n.a},a758:function(t,e,r){"use strict";var a=r("bb27"),n=r.n(a);n.a},bb27:function(t,e,r){},c9e6:function(t,e,r){"use strict";var a=r("0b26"),n=r.n(a);n.a},da2c:function(t,e,r){"use strict";var a=r("7877"),n=r.n(a);n.a},e82b:function(t,e,r){}});
//# sourceMappingURL=app.6c081efd.js.map